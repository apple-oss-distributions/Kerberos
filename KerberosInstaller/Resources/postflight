#!/bin/sh

CFMGLUE=${3}/System/Library/CFMSupport/Kerberos
PKGDIR=${1}

# FIXME:  These should be conditionalized for the processor
REZ=${PKGDIR}/Rez.ppc
SETFILE=${PKGDIR}/SetFile.ppc

#
# assemble Kerberos CFM Glue:
#

"${REZ}" "${PKGDIR}/Kerberos._r" -a -o "${CFMGLUE}"

TYPE=`cat "${PKGDIR}/Kerberos._type" | sed -e 's/^"//' -e 's/"$//'`
"${SETFILE}" -t "${TYPE}" "${CFMGLUE}"

CREATOR=`cat "${PKGDIR}/Kerberos._creator" | sed -e 's/^"//' -e 's/"$//'`
"${SETFILE}" -c "${CREATOR}" "${CFMGLUE}"

ATTRIBUTES=`cat "${PKGDIR}/Kerberos._attributes" | sed -e 's/^"//' -e 's/"$//'`
"${SETFILE}" -a "${ATTRIBUTES}" "${CFMGLUE}"

#
# Set permissions/owner of  /
#
"${3}/usr/bin/chgrp" admin "${3}"
"${3}/bin/chmod" 1775  "${3}"

exit 0
